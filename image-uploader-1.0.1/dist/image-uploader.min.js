/*! image-uploader 19-06-2016 */
!function(a){function b(b){const c=b||g;return a.config.update({accessKeyId:c.accessKeyId,secretAccessKey:c.secretAccessKey,region:c.region}),this._err={},this._accessKeyId=c.accessKeyId,this._secretAccessKey=c.secretAccessKey,this._region=c.region,this._bucketName=c.bucketName,this._bucketUrl=c.bucketUrl,this._file=c.file,this._uploadProgress=c.uploadProgress,this._sizeLimit=c.sizeLimit,this._bucket=new a.S3({params:{Bucket:this._bucketName}}),this}const c=this,d=(c.ImageUploader,10485760),e=Math.round(10)+"MB",f=function(){let a="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let c=0;8>c;c++)a=`${a}${b.charAt(Math.floor(Math.random()*b.length))}`;return a},g={accessKeyId:"AKIAJDDLMBIFFIUWYCEA",bucket:{},bucketName:"com.thinkcrazy.ionicimageupload",bucketUrl:"https://s3.amazonaws.com/com.thinkcrazy.ionicimageupload/",file:{},region:"us-east-1",secretAccessKey:"gCF19auerZBOx9IvpPpKAlCJYbD0yUo+bLyNB+wA",sizeLimit:d,uploadProgress:0};c.ImageUploader=b,b.prototype={validateFile(a){return a.size||(this._err={message:"Missing file argument",code:"No File"}),a.size<=0&&(this._err={message:"File has size of 0",code:"Erroneous File"}),Math.round(parseInt(a.size,10))>this._sizeLimit&&(this._err={code:"File Too Large",message:"Attachment too big. Max "+e+" allowed"}),this._err},clearProgress(){this._uploadProgress=0},updateProgress(a){this._uploadProgress=a},resetUploadProgress(){setTimeout(function(){b.prototype.clearProgress()},100)},push(a,b){if(!this.validateFile(a))throw new Error("Missing file.");const c=encodeURI(f()+"-"+a.name),d={ACL:"public-read",Body:a,Bucket:this._bucketName,ContentType:a.type,Key:c,ServerSideEncryption:"AES256"};this.updateProgress(0),this._bucket.putObject(d,function(a,d){return a?(this._err=Object.assign({},a,{data:d}),!1):(this.resetUploadProgress(),Object.assign(d,d,{filename:c,url:this._bucketUrl+c}),b(d),!0)}).on("httpUploadProgress",function(a){this.updateProgress(Math.round(a.loaded/a.total*100))})}}}(window.AWS);